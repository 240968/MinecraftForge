--- a/net/minecraft/server/network/ServerLoginPacketListenerImpl.java
+++ b/net/minecraft/server/network/ServerLoginPacketListenerImpl.java
@@ -180,7 +_,7 @@
          throw new IllegalStateException("Protocol error", cryptexception);
       }
 
-      Thread thread = new Thread("User Authenticator #" + f_10014_.incrementAndGet()) {
+      Thread thread = new Thread(net.minecraftforge.fml.util.thread.SidedThreadGroups.SERVER, "User Authenticator #" + f_10014_.incrementAndGet()) {
          public void run() {
             String s1 = Objects.requireNonNull(ServerLoginPacketListenerImpl.this.f_291165_, "Player name not initialized");
 
@@ -220,6 +_,7 @@
    }
 
    public void m_10044_(ServerboundCustomQueryAnswerPacket p_297965_) {
+      if (!net.minecraftforge.common.ForgeHooks.onCustomPayload(p_297965_, this.f_10013_))
       this.m_10053_(f_291075_);
    }
 
@@ -230,6 +_,11 @@
       this.f_10013_.m_129505_(serverconfigurationpacketlistenerimpl);
       serverconfigurationpacketlistenerimpl.m_294295_();
       this.f_10019_ = ServerLoginPacketListenerImpl.State.ACCEPTED;
+   }
+
+   @Nullable
+   public GameProfile getAuthenticatedProfile() {
+       return this.f_291112_;
    }
 
    protected static GameProfile m_295545_(String p_297551_) {
